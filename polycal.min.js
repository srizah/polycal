!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e():t.Polycal=e()}(this,function(){function t(t){var e,n,a,r,o=Array.prototype.slice.call(arguments,1);for(n=0,a=o.length;a>n;n++)if(o[n]&&"object"==typeof o)for(r in o[n])o[n].hasOwnProperty(r)&&(e=o[n][r],t[r]=e);return t}function e(){if(1!==arguments.length||"string"!=typeof arguments[0]||10!==arguments[0].length&&7!==arguments[0].length){if(2!==arguments.length&&3!==arguments.length||!a(arguments))throw new Error("Unable to parse date. Please use ISO8601 formatting, i.e. YYYY-MM-DD. Or pass YYYY, MM, DD as arguments");return n(arguments,!1)}return n(arguments[0].split("-"),!0)}function n(t,e){return{year:+t[0],month:e?+t[1]-1:+t[1],day:+t[2]}}function a(t){for(var e=0,n=t.length;n>e;e++)if("number"!=typeof t[e])return!1;return!0}function r(t){return Math.ceil((t.days.length+t.days[0].day)/7)}function o(t,e,n){for(var a=document.createElement("tr"),r=0;e>r;r++){var o=document.createElement(t);a.appendChild("function"==typeof n?n(r,o):o)}return a}function s(e){var n=e&&"object"==typeof e?t({},this.defaults,e):this.defaults;this.model=[],this.init(n)}var u=new Date,l=u.getFullYear(),i=u.getMonth(),h=u.getDate();return s.prototype.defaults={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],months:60,start:{year:l,month:i}},s.prototype.init=function(t){function e(t,e,n,a){this.year=t,this.month=e,this.date=n,this.day=a}function n(t,n){for(var a=new Date(t,n+1,0).getDate(),r=new Date(t,n,1).getDay(),o=[],s=t+Math.floor(n/12),u=n%12,l=0;a>l;l++)o.push(new e(s,u,l+1,(r+l)%7));this.year=s,this.month=u,this.days=o}for(var a=t,s=0,u=a.months;u>s;s++)this.model.push(new n(a.start.year,a.start.month+s));n.prototype.table=function(){var t=document.createElement("table"),e=document.createElement("thead"),n=document.createElement("tbody"),s=this;e.appendChild(o("th",1,function(t,e){return e.textContent=a.monthNames[s.month]+" "+s.year,e.setAttribute("colspan","7"),e.className="polycal-header",e})),e.appendChild(o("th",7,function(t,e){return e.textContent=a.dayNames[t],e.className="polycal-label",e}));for(var u=0;u<r(this);u++)n.appendChild(o("td",7,function(t,e){return e.className="polycal-empty",e}));for(var l=[].slice.call(n.getElementsByTagName("td"),this.days[0].day),i=0,h=this.days.length;h>i;i++)l[i].textContent=this.days[i].date,l[i].className="polycal-day";return t.appendChild(e),t.appendChild(n),t.className="polycal",t}},s.prototype.find=function(){var t,n,a,r=e.apply(null,arguments);for(t=0,n=this.model.length;n>t;t++){if(a=this.model[t],!r.day&&a.year===r.year&&a.month===r.month)return a;if(r.day&&a.year===r.year&&a.month===r.month&&void 0!==a.days[r.day-1])return a.days[r.day-1]}throw new Error("Unable to find date.")},s.prototype.today=function(){return this.find(l,i,h)},s});